# Windows and Frames

In JavaScript, the `window` object represents the browser window. It's the top-level object that contains everything in your webpage. Understanding windows and frames helps you control browser windows and work with multiple pages.

## The Window Object

The `window` object is always available. In fact, when you write code, you're often using `window` methods without realizing it!

```js
// These are the same:
alert("Hello");
window.alert("Hello");

// These are the same:
console.log("Hi");
window.console.log("Hi");
```

The `window` object contains:
* The document (your HTML page)
* Browser information
* Methods to open/close windows
* Location information
* And much more!

## Window Size and Position

You can get information about the window:

```js
// Window size
alert( window.innerWidth );  // width of visible area
alert( window.innerHeight ); // height of visible area

// Window position (distance from top-left of screen)
alert( window.screenX ); // horizontal position
alert( window.screenY ); // vertical position
```

You can also scroll the window:

```js
window.scrollTo(0, 100); // scroll to position (x, y)
window.scrollBy(0, 50);  // scroll by amount (x, y)
```

## Opening New Windows

You can open a new browser window using `window.open()`:

```js
let newWindow = window.open("https://www.example.com", "myWindow", "width=500,height=400");
```

The `open()` method takes three parameters:
1. **URL** - the webpage to open (or empty string for blank page)
2. **Name** - a name for the window (optional)
3. **Features** - window size and options (optional)

**Window features:**
* `width=500` - window width in pixels
* `height=400` - window height
* `left=100` - distance from left edge
* `top=100` - distance from top edge
* `resizable=yes` - can user resize? (yes/no)
* `scrollbars=yes` - show scrollbars? (yes/no)

Example:
```js
let popup = window.open(
  "https://www.example.com",
  "example",
  "width=600,height=400,left=200,top=200,resizable=yes"
);
```

## Closing Windows

To close a window you opened:

```js
let newWindow = window.open("", "myWindow");
// ... later ...
newWindow.close(); // close the window
```

**Important:** You can only close windows that your script opened. You cannot close the main window (browsers prevent this for security).

## Checking if Window is Closed

You can check if a window still exists:

```js
let newWindow = window.open("", "myWindow");

if (newWindow.closed) {
  alert("Window is closed");
} else {
  alert("Window is still open");
}
```

## Frames and Iframes

Frames let you embed one webpage inside another. Modern websites use `<iframe>` tags:

```html
<iframe src="https://www.example.com" width="600" height="400"></iframe>
```

In JavaScript, you can access iframes:

```js
// Get the iframe element
let iframe = document.querySelector('iframe');

// Access the window inside the iframe
let iframeWindow = iframe.contentWindow;

// Access the document inside the iframe
let iframeDocument = iframe.contentDocument;
```

## Cross-Frame Communication

When you have multiple windows or frames, they can communicate using `postMessage()`:

**Sending a message:**
```js
// In the main window
let iframe = document.querySelector('iframe');
iframe.contentWindow.postMessage("Hello from parent!", "https://example.com");
```

The `postMessage()` method takes:
1. **Message** - the data to send (can be string, number, object, etc.)
2. **Target origin** - which website can receive it (for security)

**Receiving a message:**
```js
// In the iframe window
window.addEventListener("message", function(event) {
  // Check the origin for security
  if (event.origin === "https://parent-site.com") {
    alert("Received: " + event.data);
    // event.data contains the message
  }
});
```

**Important security note:** Always check `event.origin` before trusting messages from other windows!

## Window Location

The `window.location` object tells you about the current page URL:

```js
alert( window.location.href );    // full URL
alert( window.location.hostname ); // domain name
alert( window.location.pathname ); // path part
alert( window.location.search );   // query string (?key=value)
```

You can also navigate to a new page:

```js
window.location.href = "https://www.example.com"; // go to new page
window.location.reload(); // reload current page
```

## Window History

The `window.history` object lets you navigate through browser history:

```js
window.history.back();    // go back one page
window.history.forward(); // go forward one page
window.history.go(-2);   // go back 2 pages
window.history.go(1);     // go forward 1 page
```

## Window Events

You can listen for window events:

```js
// When window loads
window.addEventListener("load", function() {
  alert("Page loaded!");
});

// When window is resized
window.addEventListener("resize", function() {
  alert("Window resized!");
});

// When user scrolls
window.addEventListener("scroll", function() {
  console.log("Scrolling...");
});

// When window is about to close
window.addEventListener("beforeunload", function(event) {
  event.preventDefault();
  return "Are you sure you want to leave?";
});
```

## Quick Recap

**Window object:**
* `window.innerWidth` / `window.innerHeight` - window size
* `window.open(url, name, features)` - open new window
* `window.close()` - close window (only ones you opened)
* `window.location` - current page URL
* `window.history` - browser history navigation

**Frames:**
* Use `<iframe>` to embed pages
* Access with `iframe.contentWindow` and `iframe.contentDocument`
* Use `postMessage()` for cross-frame communication
* Always check `event.origin` for security!

**Common uses:**
* Opening popup windows
* Embedding content from other sites
* Communicating between windows/frames
* Navigating and controlling browser history

**Security reminder:** Modern browsers block many popup windows unless they're triggered by a user action (like a button click). Always test your code!

Windows and frames are powerful tools, but use them carefully and always consider security!


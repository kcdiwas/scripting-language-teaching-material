# Array Methods (Simple Guide)

Arrays come with many helpful methods. We'll group them by what they do and keep examples short and clear.

## Add or Remove Items

You already know these:
* `arr.push(...items)` adds to the end
* `arr.pop()` removes from the end
* `arr.shift()` removes from the beginning
* `arr.unshift(...items)` adds to the beginning

Now some new ones.

### splice: insert, remove, replace

`splice` can remove items and/or insert new ones.

```js
arr.splice(start, deleteCount, item1, item2, ...)
```

It changes the original array and returns the removed items.

Remove one item from index 1:
```js run
let arr = ["I", "study", "JavaScript"];
arr.splice(1, 1);
alert(arr); // ["I", "JavaScript"]
```

Remove three and replace with two:
```js run
let arr = ["I", "study", "JavaScript", "right", "now"];
arr.splice(0, 3, "Let's", "dance");
alert(arr); // ["Let's", "dance", "right", "now"]
```

Get removed items:
```js run
let arr = ["I", "study", "JavaScript", "right", "now"];
let removed = arr.splice(0, 2);
alert(removed); // I,study
```

Insert without removing (set deleteCount to 0):
```js run
let arr = ["I", "study", "JavaScript"];
arr.splice(2, 0, "complex", "language");
alert(arr); // I,study,complex,language,JavaScript
```

Negative indexes count from the end:
```js run
let arr = [1, 2, 5];
arr.splice(-1, 0, 3, 4);
alert(arr); // 1,2,3,4,5
```

### slice: copy a part

Returns a new array from `start` to `end` (end not included). Does not change the original.
```js
arr.slice(start, end)
```

```js run
let arr = ["t", "e", "s", "t"];
alert(arr.slice(1, 3)); // e,s
alert(arr.slice(-2));   // s,t
```

Call with no arguments to make a shallow copy: `arr.slice()`.

### concat: join arrays and values

Creates a new array by combining arrays and values.
```js
arr.concat(arg1, arg2, ...)
```

```js run
let arr = [1, 2];
alert(arr.concat([3, 4]));          // 1,2,3,4
alert(arr.concat([3, 4], [5, 6]));  // 1,2,3,4,5,6
alert(arr.concat([3, 4], 5, 6));    // 1,2,3,4,5,6
```

Array-like objects are added as one item unless they set `Symbol.isConcatSpreadable = true`.

## Iterate over items: forEach

Run a function for every element. Ignores return values.
```js
arr.forEach(function(item, index, array) {
  // use item, index, array
});
```

```js run
["Bilbo", "Gandalf", "Nazgul"].forEach(alert);
```

```js run
["Bilbo", "Gandalf", "Nazgul"].forEach((item, index, array) => {
  alert(`${item} is at index ${index} in ${array}`);
});
```

## Search in an Array

### indexOf, lastIndexOf, includes

* `indexOf(item, from)` returns the index or -1
* `lastIndexOf(item, from)` searches from right to left
* `includes(item, from)` returns true or false

They use strict equality (===). `includes` works with `NaN` correctly.

```js run
let arr = [1, 0, false];
alert(arr.indexOf(0));     // 1
alert(arr.indexOf(false)); // 2
alert(arr.indexOf(null));  // -1
alert(arr.includes(1));    // true
```

```js run
const arr = [NaN];
alert(arr.indexOf(NaN));  // -1
alert(arr.includes(NaN)); // true
```

### find and findIndex

Find the first element that matches a test.
```js
let result = arr.find(function(item, index, array) {
  return condition; // true to match
});
```

Returns the element or `undefined`. `findIndex` returns the index or -1.

```js run
let users = [
  {id: 1, name: "John"},
  {id: 2, name: "Pete"},
  {id: 3, name: "Mary"}
];
let user = users.find(u => u.id == 1);
alert(user.name); // John
```

### filter

Get all elements that match a test.
```js
let results = arr.filter(function(item, index, array) {
  return condition; // true to include
});
```

```js run
let users = [
  {id: 1, name: "John"},
  {id: 2, name: "Pete"},
  {id: 3, name: "Mary"}
];
let someUsers = users.filter(u => u.id < 3);
alert(someUsers.length); // 2
```

## Transform or Reorder

### map

Create a new array by transforming each element.
```js
let result = arr.map(function(item, index, array) {
  return newValue;
});
```

```js run
let lengths = ["Bilbo", "Gandalf", "Nazgul"].map(item => item.length);
alert(lengths); // 5,7,6
```

### sort

Sorts the array in place and returns it. By default sorts as strings.

```js run
let arr = [1, 2, 15];
arr.sort();
alert(arr); // 1,15,2
```

Provide a compare function to sort numbers or custom logic.

```js
function compare(a, b) {
  if (a > b) return 1;
  if (a == b) return 0;
  if (a < b) return -1;
}
```

```js run
function compareNumeric(a, b) { return a - b; }
let arr = [1, 2, 15];
arr.sort(compareNumeric);
alert(arr); // 1,2,15
```

Short form with arrow function:
```js
arr.sort((a, b) => a - b);
```

Use `localeCompare` for international string sorting:
```js run
let countries = ['Österreich', 'Andorra', 'Vietnam'];
alert(countries.sort((a, b) => a > b ? 1 : -1));      // wrong for Ö
alert(countries.sort((a, b) => a.localeCompare(b)));  // correct
```

### reverse

Reverse the array in place.
```js run
let arr = [1, 2, 3, 4, 5];
arr.reverse();
alert(arr); // 5,4,3,2,1
```

### split and join

Split a string into an array, or join an array into a string.

```js run
let names = 'Bilbo, Gandalf, Nazgul';
let arr = names.split(', ');
for (let name of arr) {
  alert(`A message to ${name}.`);
}
```

Limit the number of parts:
```js run
let arr = 'Bilbo, Gandalf, Nazgul, Saruman'.split(', ', 2);
alert(arr); // Bilbo, Gandalf
```

Split into letters with `split('')`.

Join items with a glue string:
```js run
let arr = ['Bilbo', 'Gandalf', 'Nazgul'];
let str = arr.join(';');
alert(str); // Bilbo;Gandalf;Nazgul
```

### reduce and reduceRight

Combine array items into a single value by applying a function step by step.
```js
let value = arr.reduce(function(accumulator, item, index, array) {
  return nextAccumulator;
}, initial);
```

Sum example:
```js run
let arr = [1, 2, 3, 4, 5];
let result = arr.reduce((sum, current) => sum + current, 0);
alert(result); // 15
```

If there is no `initial` and the array is empty, `reduce` throws an error. It is safer to always provide `initial`.

`reduceRight` works the same but from right to left.

## Check if a Value is an Array

`Array.isArray(value)` returns true if the value is an array.
```js run
alert(Array.isArray({}));  // false
alert(Array.isArray([]));  // true
```

## Optional thisArg

Methods like `find`, `filter`, and `map` accept an optional second argument `thisArg`. It sets the value of `this` inside your callback.

```js run
let army = {
  minAge: 18,
  maxAge: 27,
  canJoin(user) {
    return user.age >= this.minAge && user.age < this.maxAge;
  }
};

let users = [ {age: 16}, {age: 20}, {age: 23}, {age: 30} ];
let soldiers = users.filter(army.canJoin, army);
alert(soldiers.length); // 2
```

You can also write `users.filter(user => army.canJoin(user))` which does the same.

## Cheat Sheet

To add or remove elements
* `push(...items)` adds to the end
* `pop()` removes from the end
* `shift()` removes from the beginning
* `unshift(...items)` adds to the beginning
* `splice(pos, deleteCount, ...items)` removes and inserts
* `slice(start, end)` copies a part into a new array
* `concat(...items)` creates a new array by joining

To search
* `indexOf` and `lastIndexOf` to get positions
* `includes` to check if present
* `find` and `filter` with a test function
* `findIndex` returns the index

To iterate
* `forEach` runs a function on each item

To transform
* `map` creates a new array
* `sort` sorts in place
* `reverse` reverses in place
* `split` and `join` convert between string and array
* `reduce` combines items into one value

Other
* `Array.isArray(arr)` checks if value is an array

Note: `sort`, `reverse`, and `splice` change the original array. Everything else returns new values.
